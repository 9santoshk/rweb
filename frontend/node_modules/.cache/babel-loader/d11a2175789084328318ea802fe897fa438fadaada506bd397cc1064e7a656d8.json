{"ast":null,"code":"var _jsxFileName = \"/home/santoshk/SK/pycharm2/reactdev/ranjanweb/frontend/src/App.js\",\n  _s = $RefreshSig$();\n// import logo from './logo.svg';\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { format } from \"date-fns\";\nimport './App.css';\nimport { da } from \"date-fns/locale\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseUrl = \"http://localhost:5000\";\nfunction App() {\n  _s();\n  const [description, setDescription] = useState(\"\");\n  const [editDescription, setEditDescription] = useState(\"\");\n  const [eventsList, setEventsList] = useState([]);\n  const [eventId, setEventId] = useState(null);\n  const fetchEvents = async () => {\n    const data = await axios.get(baseUrl + '/events');\n    const {\n      events\n    } = data.data;\n    setEventsList(events);\n    console.log(\"Data: \", data);\n  };\n  const handlleChange = (e, field) => {\n    if (field == 'edit') {\n      setEditDescription(e.target.value);\n    } else {\n      setDescription(e.target.value);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    // console.log(description);\n    try {\n      if (editDescription) {\n        const data = await axios.put(`${baseUrl}/events/${eventId}`, {\n          description: editDescription\n        });\n        const updatedEvent = data.data.event;\n        const updatedList = eventsList.map(event => {\n          if (event.id == eventId) {\n            return event = updatedEvent;\n          }\n          return event;\n        });\n        setEventsList(updatedList);\n      } else {\n        const data = await axios.post(baseUrl + '/event', {\n          description\n        });\n        setEventsList([...eventsList, data.data]);\n      }\n      setDescription('');\n      setEditDescription('');\n      setEventId(null);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const handleDelete = async id => {\n    // e.preventDefault();\n    console.log(`${baseUrl}/events/${id}`);\n    try {\n      await axios.delete(`${baseUrl}/events/${id}`);\n      // print('${baseUrl}\\events\\${id}')\n      const updatedList = eventsList.filter(event => event.id !== id);\n      setEventsList(updatedList);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const toggleEdit = async event => {\n    // e.preventDefault();\n    setEventId(event.id);\n    setEditDescription(event.description);\n  };\n  useEffect(() => {\n    fetchEvents();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \" Description \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => handlleChange(e, 'description'),\n          type: \"text\",\n          name: \"description\",\n          id: \"description\",\n          placeholder: \"descriobe the event\",\n          value: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \" Submit \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: eventsList.map(event => {\n          if (eventId == event.id) {\n            return /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: e => handleSubmit(e, 'edit'),\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => handlleChange(e, 'edit'),\n                type: \"text\",\n                name: \"editdescription\",\n                id: \"editdescription\",\n                value: editDescription\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 17\n              }, this)]\n            }, event.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              style: {\n                display: \"flex\"\n              },\n              \"event-id\": event.id,\n              description: event.description,\n              children: [format(new Date(event.created_at), \"MM/dd, p\"), \" :\", \" \", event.description, /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleEdit(event),\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(event.id),\n                children: \" x \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this)]\n            }, event.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"I1weUBG+jSv84dFhN9mIMo9s/ls=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","axios","format","da","jsxDEV","_jsxDEV","baseUrl","App","_s","description","setDescription","editDescription","setEditDescription","eventsList","setEventsList","eventId","setEventId","fetchEvents","data","get","events","console","log","handlleChange","e","field","target","value","handleSubmit","preventDefault","put","updatedEvent","event","updatedList","map","id","post","err","error","message","handleDelete","delete","filter","toggleEdit","className","children","onSubmit","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","onChange","type","name","placeholder","style","display","Date","created_at","onClick","_c","$RefreshReg$"],"sources":["/home/santoshk/SK/pycharm2/reactdev/ranjanweb/frontend/src/App.js"],"sourcesContent":["// import logo from './logo.svg';\nimport {useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport {format} from \"date-fns\";\n\nimport './App.css';\nimport { da } from \"date-fns/locale\";\n\n\nconst baseUrl=\"http://localhost:5000\" \n\nfunction App() {\n  const [description, setDescription] =useState(\"\");\n  const [editDescription, setEditDescription] =useState(\"\");\n  const [eventsList, setEventsList] =useState([]);\n  const [eventId, setEventId] = useState(null);\n\n  const fetchEvents = async () => {\n    const data = await axios.get(baseUrl+'/events')\n    const { events } = data.data\n    setEventsList(events);\n    console.log(\"Data: \", data)\n  }\n\n\n  const handlleChange  = (e,field) => {\n    if (field =='edit') {\n      setEditDescription(e.target.value);\n    } else {\n      setDescription(e.target.value);\n\n    }\n  } \n  \n  const handleSubmit  = async e => {\n    e.preventDefault();\n    // console.log(description);\n    try {\n      if (editDescription) {\n        const data=await axios.put(`${baseUrl}/events/${eventId}`, {description: editDescription});\n        const updatedEvent =data.data.event\n        const updatedList= eventsList.map(event=>{\n          if (event.id ==eventId) {\n            return event = updatedEvent\n          }\n          return event\n        })\n        setEventsList(updatedList)\n      } else {\n        const data = await axios.post(baseUrl+'/event',{description})\n        setEventsList([...eventsList, data.data]);\n      }\n      setDescription('');\n      setEditDescription('');\n      setEventId(null)\n\n    } catch (err) {\n      console.error(err.message); \n    }\n  } \n\n  const handleDelete  = async (id) => {\n    // e.preventDefault();\n    console.log(`${baseUrl}/events/${id}`);\n    try {\n      await axios.delete(`${baseUrl}/events/${id}`)\n      // print('${baseUrl}\\events\\${id}')\n      const updatedList = eventsList.filter(event => event.id !== id)\n      setEventsList(updatedList);\n    } catch (err) {\n      console.error(err.message); \n    }\n  } \n\n  const toggleEdit  = async (event) => {\n    // e.preventDefault();\n    setEventId(event.id);\n    setEditDescription(event.description);\n\n  } \n\n\n\n  useEffect(() => {\n    fetchEvents();\n  },[])\n  \n  return (\n    <div className=\"App\">\n      <section>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor=\"description\"> Description </label>\n          <input\n            onChange={(e)=> handlleChange(e,'description')}           \n            type=\"text\"\n            name=\"description\"\n            id=\"description\"\n            placeholder=\"descriobe the event\"\n            value={description}\n          />\n          <button type=\"submit\"> Submit </button>\n        </form>\n      </section>\n      <section>\n        <ul>\n          {eventsList.map(event => {\n            if(eventId==event.id){\n              return (\n                <form onSubmit={e => handleSubmit(e,'edit')} key={event.id}>\n                <input\n                  onChange={e=> handlleChange(e,'edit')}           \n                  type=\"text\"\n                  name=\"editdescription\" \n                  id=\"editdescription\"\n                  value={editDescription}\n                />\n                <button type=\"submit\">Submit</button>\n              </form>\n\n              )\n\n            } else {\n              return( \n                <li style={{display: \"flex\"}} key={event.id} event-id={event.id} description={event.description}>\n                  {format(new Date(event.created_at), \"MM/dd, p\")} :{\" \"}\n                  {event.description}\n                  <button onClick={() => toggleEdit(event)}>Edit</button>\n                  <button onClick = {() => handleDelete(event.id)} > x </button>\n                </li>\n              )\n  \n            }\n          })}\n        </ul>\n      </section>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}